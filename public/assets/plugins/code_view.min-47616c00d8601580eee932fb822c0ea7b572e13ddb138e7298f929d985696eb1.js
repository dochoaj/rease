/*!
 * froala_editor v2.0.1 (https://www.froala.com/wysiwyg-editor)
 * License https://froala.com/wysiwyg-editor/terms
 * Copyright 2014-2015 Froala Labs
 */
!function(e){"function"==typeof define&&define.amd?module.exports=function(t,n){return void 0===n&&(n="undefined"!=typeof window?require("jquery"):require("jquery")(t)),e(n),n}:e(jQuery)}(function(e){"use strict";e.extend(e.FroalaEditor.DEFAULTS,{codeMirror:!0,codeMirrorOptions:{lineNumbers:!0,tabMode:"indent",indentWithTabs:!0,lineWrapping:!0,mode:"text/html",tabSize:2}}),e.FroalaEditor.PLUGINS.codeView=function(t){function n(){return t.$box.hasClass("fr-code-view")}function i(){return d?d.getValue():c.val()}function a(e){var n=i();t.html.set(n),t.$el.blur(),t.$tb.find(" > .fr-command").not(e).removeClass("fr-disabled"),e.removeClass("fr-active"),t.events.focus(!0),t.placeholder.refresh(),t.undo.saveStep()}function o(e,n){!d&&t.opts.codeMirror&&"undefined"!=typeof CodeMirror&&(d=CodeMirror.fromTextArea(c.get(0),t.opts.codeMirrorOptions)),t.undo.saveStep(),t.html.cleanWhiteTags(!0),t.core.hasFocus()&&(t.selection.save(),t.$el.find('.fr-marker[data-type="true"]:first').replaceWith('<span class="fr-tmp fr-sm">F</span>'),t.$el.find('.fr-marker[data-type="false"]:last').replaceWith('<span class="fr-tmp fr-em">F</span>'),t.$el.blur());var i=t.html.get(!1,!0);t.$el.find("span.fr-tmp").remove(),i=i.replace(/<span class="fr-tmp fr-sm">F<\/span>/,"FROALA-SM"),i=i.replace(/<span class="fr-tmp fr-em">F<\/span>/,"FROALA-EM"),t.codeBeautifier&&(i=t.codeBeautifier.run(i,{end_with_newline:!0,indent_inner_html:!0,extra_liners:["p","h1","h2","h3","h4","h5","h6","blockquote","pre","ul","ol","table"],brace_style:"expand",indent_char:"	",indent_size:1,wrap_line_length:0}));var a,o;if(d){a=i.indexOf("FROALA-SM"),o=i.indexOf("FROALA-EM"),a>o?a=o:o-=9,i=i.replace(/FROALA-SM/g,"").replace(/FROALA-EM/g,"");var r=i.substring(0,a).length-i.substring(0,a).replace(/\n/g,"").length,s=i.substring(0,o).length-i.substring(0,o).replace(/\n/g,"").length;a=i.substring(0,a).length-i.substring(0,i.substring(0,a).lastIndexOf("\n")+1).length,o=i.substring(0,o).length-i.substring(0,i.substring(0,o).lastIndexOf("\n")+1).length,d.setSize(null,Math.max(n,150)),d.setValue(i),d.focus(),d.setSelection({line:r,ch:a},{line:s,ch:o}),d.refresh(),d.clearHistory()}else a=i.indexOf("FROALA-SM"),o=i.indexOf("FROALA-EM")-9,c.css("height",n),c.val(i.replace(/FROALA-SM/g,"").replace(/FROALA-EM/g,"")),c.focus(),c.get(0).setSelectionRange(a,o);t.$tb.find(" > .fr-command").not(e).addClass("fr-disabled"),e.addClass("fr-active"),!t.helpers.isMobile()&&t.opts.toolbarInline&&t.toolbar.hide()}function r(){var e=t.$tb.find('.fr-command[data-cmd="html"]');if(n())t.$box.toggleClass("fr-code-view",!1),a(e);else{t.popups.hideAll();var i=t.$wp.outerHeight();t.$box.toggleClass("fr-code-view",!0),o(e,i)}}function s(){n()&&(r(t.$tb.find('button[data-cmd="html"]')),c.val("").removeData().remove()),u&&u.remove()}function l(){if(!t.$wp)return!1;c=e('<textarea class="fr-code" tabindex="-1">'),t.$wp.append(c),c.attr("dir",t.opts.direction);var i=function(){return!n()};t.opts.toolbarInline&&(u=e('<a data-cmd="html" title="Code View" class="fr-command fr-btn html-switch'+(t.helpers.isMobile()?"":" fr-desktop")+'" role="button" tabindex="-1"><i class="fa fa-code"></i></button>'),t.$box.append(u),t.events.bindClick(t.$box,"a.html-switch",function(){r(t.$tb.find('button[data-cmd="html"]'))})),t.events.on("buttons.refresh",i),t.events.on("copy",i,!0),t.events.on("cut",i,!0),t.events.on("paste",i,!0),t.events.on("destroy",s,!0),t.events.on("form.submit",function(){n()&&r(t.$tb.find('button[data-cmd="html"]'))})}var c,d,u;return{_init:l,toggle:r,isActive:n,get:i}},e.FroalaEditor.RegisterCommand("html",{title:"Code View",undo:!1,focus:!1,forcedRefresh:!0,callback:function(){this.codeView.toggle()}}),e.FroalaEditor.DefineIcon("html",{NAME:"code"})});