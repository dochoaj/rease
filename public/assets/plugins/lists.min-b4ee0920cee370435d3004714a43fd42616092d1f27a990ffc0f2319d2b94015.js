/*!
 * froala_editor v2.0.1 (https://www.froala.com/wysiwyg-editor)
 * License https://froala.com/wysiwyg-editor/terms
 * Copyright 2014-2015 Froala Labs
 */
!function(e){"function"==typeof define&&define.amd?module.exports=function(t,n){return void 0===n&&(n="undefined"!=typeof window?require("jquery"):require("jquery")(t)),e(n),n}:e(jQuery)}(function(e){"use strict";e.FroalaEditor.PLUGINS.lists=function(t){function n(e){return'<span class="fr-open-'+e.toLowerCase()+'"></span>'}function i(e){return'<span class="fr-close-'+e.toLowerCase()+'"></span>'}function a(t,n){for(var i=[],a=0;a<t.length;a++){var o=t[a].parentNode;"LI"==t[a].tagName&&o.tagName!=n&&i.indexOf(o)<0&&i.push(o)}for(a=i.length-1;a>=0;a--){var r=e(i[a]);r.replaceWith("<"+n.toLowerCase()+">"+r.html()+"</"+n.toLowerCase()+">")}}function o(n,i){a(n,i);for(var o=t.html.defaultTag(),r=0;r<n.length;r++)"LI"!=n[r].tagName&&(o&&n[r].tagName.toLowerCase()==o?e(n[r]).replaceWith("<"+i+"><li"+t.node.attributes(n[r])+">"+e(n[r]).html()+"</li></"+i+">"):e(n[r]).wrap("<"+i+"><li></li></"+i+">"));t.clean.lists()}function r(a){var o,r;for(o=a.length-1;o>=0;o--)for(r=o-1;r>=0;r--)if(e(a[r]).find(a[o]).length||a[r]==a[o]){a.splice(o,1);break}var s=[];for(o=0;o<a.length;o++){var l=e(a[o]),c=a[o].parentNode;l.before(i(c.tagName)),"LI"==c.parentNode.tagName?(l.before(i("LI")),l.after(n("LI"))):(t.node.isEmpty(l.get(0),!0)||0!==l.find(t.html.blockTagsQuery()).length||l.append("<br>"),l.append(n("LI")),l.prepend(i("LI"))),l.after(n(c.tagName)),"LI"==c.parentNode.tagName&&(c=c.parentNode.parentNode),s.indexOf(c)<0&&s.push(c)}for(o=0;o<s.length;o++){var d=e(s[o]),u=d.html();u=u.replace(/<span class="fr-close-([a-z]*)"><\/span>/g,"</$1>"),u=u.replace(/<span class="fr-open-([a-z]*)"><\/span>/g,"<$1>"),d.replaceWith(t.node.openTagString(d.get(0))+u+t.node.closeTagString(d.get(0)))}t.$el.find("li:empty").remove(),t.$el.find("ul:empty, ol:empty").remove(),t.clean.lists(),t.html.wrap()}function s(e,t){for(var n=!0,i=0;i<e.length;i++){if("LI"!=e[i].tagName)return!1;e[i].parentNode.tagName!=t&&(n=!1)}return n}function l(e){t.selection.save(),t.html.wrap(!0,!0),t.selection.restore();for(var n=t.selection.blocks(),i=0;i<n.length;i++)"LI"!=n[i].tagName&&"LI"==n[i].parentNode.tagName&&(n[i]=n[i].parentNode);t.selection.save(),s(n,e)?r(n):o(n,e),t.html.unwrap(),t.selection.restore()}function c(n,i){var a=e(t.selection.element());if(a.get(0)!=t.$el.get(0)){var o=a.get(0);"LI"!=o.tagName&&(o=a.parents("li").get(0)),o&&o.parentNode.tagName==i&&t.$el.get(0).contains(o.parentNode)&&n.addClass("fr-active")}}function d(n){t.selection.save();for(var i=0;i<n.length;i++){var a=n[i].previousSibling;if(a){var o=e(n[i]).find("> ul, > ol").get(0);if(o){for(var r=e("<li>").prependTo(e(o)),s=t.node.contents(n[i])[0];s&&!t.node.isList(s);){var l=s.nextSibling;r.append(s),s=l}e(a).append(e(o)),e(n[i]).remove()}else{var c=e(a).find("> ul, > ol").get(0);if(c)e(c).append(e(n[i]));else{var d=e("<"+n[i].parentNode.tagName+">");e(a).append(d),d.append(e(n[i]))}}}}t.clean.lists(),t.selection.restore()}function u(e){t.selection.save(),r(e),t.selection.restore()}function f(e){if("indent"==e||"outdent"==e){for(var n=!1,i=t.selection.blocks(),a=[],o=0;o<i.length;o++)"LI"==i[o].tagName?(n=!0,a.push(i[o])):"LI"==i[o].parentNode.tagName&&(n=!0,a.push(i[o].parentNode));n&&("indent"==e?d(a):u(a))}}function p(){t.events.on("commands.after",f),t.events.on("keydown",function(n){if(n.which==e.FroalaEditor.KEYCODE.TAB){for(var i,a=t.selection.blocks(),o=[],r=0;r<a.length;r++)"LI"==a[r].tagName?(i=!0,o.push(a[r])):"LI"==a[r].parentNode.tagName&&(i=!0,o.push(a[r].parentNode));if(i)return n.preventDefault(),n.stopPropagation(),n.shiftKey?u(o):d(o),!1}},!0)}return{_init:p,format:l,refresh:c}},e.FroalaEditor.RegisterCommand("formatUL",{title:"Unordered List",refresh:function(e){this.lists.refresh(e,"UL")},callback:function(){this.lists.format("UL")}}),e.FroalaEditor.RegisterCommand("formatOL",{title:"Ordered List",refresh:function(e){this.lists.refresh(e,"OL")},callback:function(){this.lists.format("OL")}}),e.FroalaEditor.DefineIcon("formatUL",{NAME:"list-ul"}),e.FroalaEditor.DefineIcon("formatOL",{NAME:"list-ol"})});